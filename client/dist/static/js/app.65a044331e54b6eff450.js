webpackJsonp([1],{0:function(e,t){},"37yX":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[this._m(0),this._v(" "),t("hr"),this._v(" "),t("router-view"),this._v(" "),t("br"),this._v(" "),this._m(1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("header",[t("h1",[this._v("Chat Application")]),this._v(" "),t("h2",[this._v("ChatApp")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("footer",[t("p",[this._v("© ChatApp")])])}]};var i=n("VU/8")({name:"App"},r,!1,function(e){n("RWAD")},null,null).exports,a=n("/ocq"),o=n("18Sv"),u=n.n(o),c=n("Xxa5"),l=n.n(c),p=n("exGp"),d=n.n(p),g=n("mtWM"),m=n.n(g),v=function(){return m.a.create({baseURL:"http://localhost:8081"})},_=function(e){return v().post("signIn",e)},h=function(e){return v().post("signUp",e)},f={name:"Login",data:function(){return{sign_in_email:"",sign_in_pwd:"",sign_up_email:"",sign_up_pwd:""}},beforeCreate:function(){this.$session.exists()&&this.$router.push({name:"ChatProfile"})},methods:{auth:function(){var e=this;return d()(l.a.mark(function t(){var n,s;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_({email:e.sign_in_email,pwd:e.sign_in_pwd});case 2:n=t.sent,s="","success"===n.data.msg?(console.log("SUCCESSFUL SIGN-IN!"),e.$session.start(),e.$session.set("loggedUser",e.sign_in_email),e.$router.push({name:"ChatProfile"})):"invalid"===n.data.msg?(s="Password is incorrect!",console.log(s),alert(s)):"no data"===n.data.msg?(s="Email ID is not registered!",console.log(s),alert(s)):(s="Some problem with Sign Up!",console.log(s),alert(s));case 5:case"end":return t.stop()}},t,e)}))()},register:function(){var e=this;return d()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$router.push({name:"RegisterUser"});case 1:case"end":return t.stop()}},t,e)}))()}}},w={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Login"},[n("div",{staticClass:"form"},[n("h2",[e._v("Sign In")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.sign_in_email,expression:"sign_in_email"}],attrs:{type:"email",placeholder:"Enter email",pattern:"[^@]+@[^@]+\\.[a-zA-Z]{2,6}",required:""},domProps:{value:e.sign_in_email},on:{input:function(t){t.target.composing||(e.sign_in_email=t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.sign_in_pwd,expression:"sign_in_pwd"}],attrs:{type:"password",placeholder:"Enter password",minlength:"8",required:""},domProps:{value:e.sign_in_pwd},on:{input:function(t){t.target.composing||(e.sign_in_pwd=t.target.value)}}}),e._v(" "),n("button",{on:{click:e.auth}},[e._v("Sign In")])]),e._v(" "),n("div",[n("br"),e._v("\n    New User? "),n("a",{on:{click:e.register}},[e._v("Click here to register ")])])])},staticRenderFns:[]},C=n("VU/8")(f,w,!1,null,null,null).exports,U=n("DmT9"),x=function(e){return v().post("getUserList",e)},y=function(e){return v().post("getLastMsgs",e)},k=function(e){return v().post("getTodayChat",e)},L=n.n(U)()("http://localhost:8081"),b={name:"ChatProfile",data:function(){return{loggedUser:"",to_user:"",msg:"",userList:[],currentChat:[],msgHistory:[],timer1:"",timer2:"",interval:1e3}},beforeCreate:function(){this.$session.exists()||this.$router.push({name:"Login"})},mounted:function(){this.loggedUser=this.$session.get("loggedUser"),this.fetchUserList(),this.fetchLastMsgs(),this.chkMsg(),this.fetchTodayChat()},methods:{chkMsg:function(){var e=this;return d()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:L.on(e.loggedUser,e.fetchTodayChat),L.on(e.loggedUser,function(e){console.log("New msg recieved"),console.log(L.loggedUser),alert(e.userFrom+" : "+e.msg)});case 2:case"end":return t.stop()}},t,e)}))()},sendMsg:function(){var e=this;return d()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:L.emit("fromClient",{userFrom:e.loggedUser,userTo:e.to_user,msg:e.msg}),console.log("data sent..."),e.fetchTodayChat();case 3:case"end":return t.stop()}},t,e)}))()},logout:function(){clearInterval(this.timer1),clearInterval(this.timer2),L.emit("disconnect"),this.$session.destroy(),this.$router.push({name:"Login"})},fetchUserList:function(){var e=this;return d()(l.a.mark(function t(){var n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x({userId:e.loggedUser});case 2:"success"===(n=t.sent).data.msg&&(e.userList=n.data.userList);case 4:case"end":return t.stop()}},t,e)}))()},fetchLastMsgs:function(){var e=this;return d()(l.a.mark(function t(){var n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y({userId:e.loggedUser,limit:50});case 2:"success"===(n=t.sent).data.msg&&(e.msgHistory=n.data.history);case 4:case"end":return t.stop()}},t,e)}))()},fetchTodayChat:function(){var e=this;return d()(l.a.mark(function t(){var n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e.to_user){t.next=5;break}return t.next=3,k({userId:e.loggedUser,userFor:e.to_user});case 3:"success"===(n=t.sent).data.msg&&(e.currentChat=n.data.todayChat);case 5:case"end":return t.stop()}},t,e)}))()},setScrollPos:function(){var e=this;return d()(l.a.mark(function t(){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(n=document.getElementById("currentChatWindow")).scrollTop=n.scrollHeight;case 2:case"end":return e.stop()}},t,e)}))()}},beforeDestroy:function(){this.logout()}},S={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ChatProfile"},[n("div",{attrs:{id:"info"}},[n("span",[e._v("Profile for User: "+e._s(e.loggedUser))]),e._v(" "),n("button",{on:{click:e.logout}},[e._v("Log Out")])]),e._v(" "),n("br"),e._v(" "),n("div",{attrs:{id:"chatMsgDiv"}},[n("div",{attrs:{id:"currentChatDiv"}},[n("h4",[e._v("Current Chat with User: "+e._s(e.to_user)+" ")]),e._v(" "),n("div",{attrs:{id:"currentChatWindow"}},e._l(e.currentChat,function(t){return n("div",{key:t.id,class:{container:!0,"container darker":t.From===e.loggedUser}},[n("p",[e._v(e._s(t.From)+" : "+e._s(t.Message))]),e._v(" "),n("span",{staticClass:"time-right"},[e._v(e._s(t.Date))])])})),e._v("To:\n      "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.to_user,expression:"to_user"}],on:{click:e.fetchTodayChat,change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.to_user=t.target.multiple?n:n[0]}}},[n("option",{attrs:{disabled:"",value:""}},[e._v("Please select user")]),e._v(" "),e._l(e.userList,function(t){return n("option",{key:t.id},[e._v("\n          "+e._s(t.email)+"\n        ")])})],2),e._v("\n       \n      Message:"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.msg,expression:"msg"}],staticStyle:{width:"300px"},attrs:{placeholder:"type message here..."},domProps:{value:e.msg},on:{input:function(t){t.target.composing||(e.msg=t.target.value)}}}),e._v(" "),n("button",{on:{click:e.sendMsg}},[e._v("Send")])]),e._v(" "),n("div",{attrs:{id:"chatHistoryDiv"}},[n("h4",[e._v("Last 50 messages")]),e._v(" "),n("div",{attrs:{id:"chatHistoryWindow"}},e._l(e.msgHistory,function(t){return n("div",{key:t.id,class:{container:!0,"container darker":t.From===e.loggedUser}},[n("p",[e._v(e._s(t.From)+" : "+e._s(t.Message))]),e._v(" "),n("span",{staticClass:"time-right"},[e._v(e._s(t.Date))])])})),e._v(" "),n("br"),e._v(" "),n("button",{on:{click:e.fetchLastMsgs}},[e._v("Refresh Messages")])])])])},staticRenderFns:[]};var $=n("VU/8")(b,S,!1,function(e){n("37yX")},null,null).exports,P={name:"RegisterUser",data:function(){return{sign_in_email:"",sign_in_pwd:"",sign_up_email:"",sign_up_pwd:""}},beforeCreate:function(){this.$session.exists()&&this.$router.push({name:"ChatProfile"})},methods:{registerUser:function(){var e=this;return d()(l.a.mark(function t(){var n,s;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h({email:e.sign_up_email,pwd:e.sign_up_pwd});case 2:n=t.sent,s="","success"===n.data.msg?(console.log("SUCCESSFUL SIGN-UP!"),s="Successfully Registered! Login to start Chatting!",alert(s),e.$router.push({name:"Login"})):"found"===n.data.msg?(s="Email ID already exixts!",console.log(s),alert(s)):(s="Some problem with Sign Up!",console.log(s),alert(s));case 5:case"end":return t.stop()}},t,e)}))()},login:function(){var e=this;return d()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$router.push({name:"Login"});case 1:case"end":return t.stop()}},t,e)}))()}}},E={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"RegisterUser"},[n("div",{staticClass:"form"},[n("h2",[e._v("Sign Up")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.sign_up_email,expression:"sign_up_email"}],attrs:{type:"email",placeholder:"Enter email",pattern:"[^@]+@[^@]+\\.[a-zA-Z]{2,6}",required:""},domProps:{value:e.sign_up_email},on:{input:function(t){t.target.composing||(e.sign_up_email=t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.sign_up_pwd,expression:"sign_up_pwd"}],attrs:{type:"password",placeholder:"Enter password",minlength:"8",required:""},domProps:{value:e.sign_up_pwd},on:{input:function(t){t.target.composing||(e.sign_up_pwd=t.target.value)}}}),e._v(" "),n("button",{on:{click:e.registerUser}},[e._v("Sign Up")])]),e._v(" "),n("div",[n("br"),e._v(" "),n("a",{on:{click:e.login}},[e._v("Click here to Login")])])])},staticRenderFns:[]},M=n("VU/8")(P,E,!1,null,null,null).exports;s.a.use(a.a),s.a.use(u.a);var I=new a.a({mode:"history",routes:[{path:"/",name:"Login",component:C},{path:"/ChatProfile",name:"ChatProfile",component:$},{path:"/RegisterUser",name:"RegisterUser",component:M}]});s.a.config.productionTip=!1,new s.a({el:"#app",router:I,components:{App:i},template:"<App/>"})},RWAD:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.65a044331e54b6eff450.js.map